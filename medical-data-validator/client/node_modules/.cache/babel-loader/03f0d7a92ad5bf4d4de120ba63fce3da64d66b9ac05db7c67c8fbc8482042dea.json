{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Box,Button,Typography,LinearProgress,Paper,Grid,Alert,Card,CardContent,Divider,Fade,Grow,Chip,Snackbar,CircularProgress,IconButton,Table,TableBody,TableCell,TableContainer,TableHead,TableRow,TablePagination,Accordion,AccordionSummary,AccordionDetails,Tooltip}from'@mui/material';import CloudUploadIcon from'@mui/icons-material/CloudUpload';import DownloadIcon from'@mui/icons-material/Download';import CheckCircleIcon from'@mui/icons-material/CheckCircle';import ErrorIcon from'@mui/icons-material/Error';import CloseIcon from'@mui/icons-material/Close';import InfoIcon from'@mui/icons-material/Info';import ExpandMoreIcon from'@mui/icons-material/ExpandMore';import VisibilityIcon from'@mui/icons-material/Visibility';import{styled,alpha}from'@mui/material/styles';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Input=styled('input')({display:'none'});const StyledButton=styled(Button)(_ref=>{let{theme}=_ref;return{borderRadius:8,padding:'10px 0',transition:'all 0.3s ease',boxShadow:'0 3px 5px 2px rgba(0, 0, 0, 0.05)','&:hover':{transform:'translateY(-2px)',boxShadow:'0 6px 10px 2px rgba(0, 0, 0, 0.1)'}};});const UploadButton=styled(StyledButton)(_ref2=>{let{theme}=_ref2;return{background:\"linear-gradient(45deg, \".concat(theme.palette.primary.main,\" 30%, \").concat(theme.palette.primary.light,\" 90%)\"),color:theme.palette.primary.contrastText};});const DownloadButton=styled(StyledButton)(_ref3=>{let{theme}=_ref3;return{background:\"linear-gradient(45deg, \".concat(theme.palette.success.main,\" 30%, \").concat(theme.palette.success.light,\" 90%)\"),color:theme.palette.success.contrastText};});const StyledPaper=styled(Paper)(_ref4=>{let{theme}=_ref4;return{borderRadius:16,boxShadow:'0 10px 30px rgba(0, 0, 0, 0.1)',overflow:'hidden',transition:'all 0.3s ease'};});const StyledLinearProgress=styled(LinearProgress)(_ref5=>{let{theme}=_ref5;return{height:10,borderRadius:5,'& .MuiLinearProgress-bar':{background:\"linear-gradient(90deg, \".concat(theme.palette.primary.main,\", \").concat(theme.palette.secondary.main,\")\")}};});const FileChip=styled(Chip)(_ref6=>{let{theme}=_ref6;return{margin:theme.spacing(1,0),borderRadius:16,fontWeight:500,boxShadow:'0 2px 5px rgba(0, 0, 0, 0.08)'};});const StatusChip=styled(Chip)(_ref7=>{let{theme}=_ref7;return{borderRadius:16,fontWeight:500};});const FileUpload=()=>{const[standardFile,setStandardFile]=useState(null);const[validationFile,setValidationFile]=useState(null);const[uploading,setUploading]=useState(false);const[progress,setProgress]=useState(0);const[resultFile,setResultFile]=useState(null);const[error,setError]=useState(null);const[ws,setWs]=useState(null);const[wsConnected,setWsConnected]=useState(false);const[snackbarOpen,setSnackbarOpen]=useState(false);const[snackbarMessage,setSnackbarMessage]=useState('');const[snackbarSeverity,setSnackbarSeverity]=useState('info');const[resultData,setResultData]=useState([]);const[page,setPage]=useState(0);const[rowsPerPage,setRowsPerPage]=useState(10);const[loading,setLoading]=useState(false);useEffect(()=>{let websocket=null;let reconnectAttempts=0;const maxReconnectAttempts=5;const reconnectDelay=2000;// 2秒\nconst connectWebSocket=()=>{try{websocket=new WebSocket('ws://localhost:3001');websocket.onopen=()=>{console.log('WebSocket Connected');setWsConnected(true);setError(null);reconnectAttempts=0;showSnackbar('服务器连接成功','success');};websocket.onmessage=event=>{const data=JSON.parse(event.data);if(data.type==='progress'){setProgress(data.progress);}else if(data.type==='error'){setError(data.message);showSnackbar(data.message,'error');}else if(data.type==='result_update'){// 接收实时结果更新\nsetResultData(prevData=>{// 检查是否已存在该字段的结果\nconst existingIndex=prevData.findIndex(item=>item.字段名===data.data.字段名);if(existingIndex>=0){// 更新现有结果\nconst updatedData=[...prevData];updatedData[existingIndex]=data.data;return updatedData;}else{// 添加新结果\nreturn[...prevData,data.data];}});}};websocket.onerror=error=>{console.error('WebSocket error:',error);setWsConnected(false);};websocket.onclose=()=>{console.log('WebSocket disconnected');setWsConnected(false);// 尝试重连\nif(reconnectAttempts<maxReconnectAttempts){reconnectAttempts++;console.log(\"Attempting to reconnect (\".concat(reconnectAttempts,\"/\").concat(maxReconnectAttempts,\")...\"));setTimeout(connectWebSocket,reconnectDelay);}else{setError('无法连接到服务器，请刷新页面重试');showSnackbar('服务器连接失败，请刷新页面重试','error');}};setWs(websocket);}catch(err){console.error('WebSocket connection error:',err);setError('WebSocket连接失败，请刷新页面重试');showSnackbar('服务器连接失败，请刷新页面重试','error');}};connectWebSocket();return()=>{if(websocket){websocket.close();}};},[]);const showSnackbar=(message,severity)=>{setSnackbarMessage(message);setSnackbarSeverity(severity);setSnackbarOpen(true);};const handleSnackbarClose=(event,reason)=>{if(reason==='clickaway'){return;}setSnackbarOpen(false);};const handleStandardFileChange=event=>{const file=event.target.files[0];if(file&&file.name.endsWith('.csv')){setStandardFile(file);setError(null);showSnackbar(\"\\u5DF2\\u9009\\u62E9\\u6807\\u51C6\\u6570\\u636E: \".concat(file.name),'success');}else{setError('标准数据必须是CSV文件');showSnackbar('标准数据必须是CSV文件','error');}};const handleValidationFileChange=event=>{const file=event.target.files[0];if(file&&(file.name.endsWith('.csv')||file.name.endsWith('.pkl'))){setValidationFile(file);setError(null);showSnackbar(\"\\u5DF2\\u9009\\u62E9\\u5F85\\u9A8C\\u8BC1\\u6570\\u636E: \".concat(file.name),'success');}else{setError('待验证数据必须是CSV或PKL文件');showSnackbar('待验证数据必须是CSV或PKL文件','error');}};const handleUpload=async()=>{if(!standardFile||!validationFile){setError('请选择标准数据和待验证数据文件');showSnackbar('请选择标准数据和待验证数据文件','warning');return;}if(!wsConnected){setError('服务器连接已断开，请刷新页面重试');showSnackbar('服务器连接已断开，请刷新页面重试','error');return;}setUploading(true);setProgress(0);setError(null);setResultData([]);// 清空之前的结果\nshowSnackbar('开始上传数据...','info');const formData=new FormData();formData.append('standard',standardFile);formData.append('validation',validationFile);try{const response=await fetch('http://localhost:3001/api/upload',{method:'POST',body:formData});const data=await response.json();if(response.ok){setResultFile(data.resultFile);showSnackbar('数据验证完成，可以下载结果','success');// 加载结果数据\nfetchResultData(data.resultFile);}else{setError(data.error+(data.details?\"\\n\".concat(data.details):''));showSnackbar('上传失败: '+data.error,'error');}}catch(err){setError('上传过程中发生错误: '+err.message);showSnackbar('上传错误: '+err.message,'error');console.error('Upload error:',err);}finally{setUploading(false);}};const fetchResultData=async filename=>{try{setLoading(true);const response=await fetch(\"http://localhost:3001/api/result/\".concat(filename));if(response.ok){const data=await response.json();setResultData(data);}else{showSnackbar('获取结果数据失败','error');}}catch(error){console.error('Error fetching result data:',error);showSnackbar('获取结果数据失败: '+error.message,'error');}finally{setLoading(false);}};const handleDownload=()=>{if(resultFile){window.open(\"http://localhost:3001/api/download/\".concat(resultFile),'_blank');showSnackbar('开始下载结果文件','info');}};const handleChangePage=(event,newPage)=>{setPage(newPage);};const handleChangeRowsPerPage=event=>{setRowsPerPage(parseInt(event.target.value,10));setPage(0);};return/*#__PURE__*/_jsxs(Box,{sx:{maxWidth:1200,mx:'auto',mt:4,p:3},children:[/*#__PURE__*/_jsx(Fade,{in:true,timeout:800,children:/*#__PURE__*/_jsxs(StyledPaper,{elevation:3,sx:{p:4},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",gutterBottom:true,align:\"center\",sx:{mb:4,fontWeight:500,background:'linear-gradient(45deg, #2196F3 30%, #21CBF3 90%)',WebkitBackgroundClip:'text',WebkitTextFillColor:'transparent'},children:\"\\u533B\\u7597\\u6570\\u636E\\u9A8C\\u8BC1\\u7CFB\\u7EDF\"}),/*#__PURE__*/_jsx(Divider,{sx:{mb:4}}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsx(Grow,{in:true,timeout:1000,children:/*#__PURE__*/_jsx(Card,{variant:\"outlined\",sx:{borderRadius:2,mb:2},children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsxs(Typography,{variant:\"subtitle1\",color:\"text.secondary\",gutterBottom:true,children:[/*#__PURE__*/_jsx(InfoIcon,{fontSize:\"small\",sx:{verticalAlign:'middle',mr:1}}),\"\\u7B2C\\u4E00\\u6B65: \\u9009\\u62E9\\u6807\\u51C6\\u6570\\u636E\"]}),/*#__PURE__*/_jsxs(Box,{sx:{mt:2},children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"standard-file\",children:[/*#__PURE__*/_jsx(Input,{accept:\".csv\",id:\"standard-file\",type:\"file\",onChange:handleStandardFileChange,disabled:uploading}),/*#__PURE__*/_jsx(UploadButton,{variant:\"contained\",component:\"span\",startIcon:/*#__PURE__*/_jsx(CloudUploadIcon,{}),fullWidth:true,disabled:uploading,children:\"\\u9009\\u62E9\\u6807\\u51C6\\u6570\\u636E\\u6587\\u4EF6 (CSV)\"})]}),standardFile&&/*#__PURE__*/_jsx(Fade,{in:true,children:/*#__PURE__*/_jsx(Box,{sx:{mt:1,textAlign:'center'},children:/*#__PURE__*/_jsx(FileChip,{label:standardFile.name,color:\"primary\",variant:\"outlined\",icon:/*#__PURE__*/_jsx(CheckCircleIcon,{}),onDelete:()=>setStandardFile(null)})})})]})]})})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsx(Grow,{in:true,timeout:1200,children:/*#__PURE__*/_jsx(Card,{variant:\"outlined\",sx:{borderRadius:2,mb:2},children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsxs(Typography,{variant:\"subtitle1\",color:\"text.secondary\",gutterBottom:true,children:[/*#__PURE__*/_jsx(InfoIcon,{fontSize:\"small\",sx:{verticalAlign:'middle',mr:1}}),\"\\u7B2C\\u4E8C\\u6B65: \\u9009\\u62E9\\u5F85\\u9A8C\\u8BC1\\u6570\\u636E\"]}),/*#__PURE__*/_jsxs(Box,{sx:{mt:2},children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"validation-file\",children:[/*#__PURE__*/_jsx(Input,{accept:\".csv,.pkl\",id:\"validation-file\",type:\"file\",onChange:handleValidationFileChange,disabled:uploading}),/*#__PURE__*/_jsx(UploadButton,{variant:\"contained\",component:\"span\",startIcon:/*#__PURE__*/_jsx(CloudUploadIcon,{}),fullWidth:true,disabled:uploading,children:\"\\u9009\\u62E9\\u5F85\\u9A8C\\u8BC1\\u6570\\u636E\\u6587\\u4EF6 (CSV/PKL)\"})]}),validationFile&&/*#__PURE__*/_jsx(Fade,{in:true,children:/*#__PURE__*/_jsx(Box,{sx:{mt:1,textAlign:'center'},children:/*#__PURE__*/_jsx(FileChip,{label:validationFile.name,color:\"primary\",variant:\"outlined\",icon:/*#__PURE__*/_jsx(CheckCircleIcon,{}),onDelete:()=>setValidationFile(null)})})})]})]})})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Grow,{in:true,timeout:1400,children:/*#__PURE__*/_jsx(Card,{variant:\"outlined\",sx:{borderRadius:2,mb:2},children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsxs(Typography,{variant:\"subtitle1\",color:\"text.secondary\",gutterBottom:true,children:[/*#__PURE__*/_jsx(InfoIcon,{fontSize:\"small\",sx:{verticalAlign:'middle',mr:1}}),\"\\u7B2C\\u4E09\\u6B65: \\u5F00\\u59CB\\u9A8C\\u8BC1\"]}),/*#__PURE__*/_jsx(Box,{sx:{mt:2},children:/*#__PURE__*/_jsx(StyledButton,{variant:\"contained\",color:\"primary\",onClick:handleUpload,disabled:!standardFile||!validationFile||uploading||!wsConnected,fullWidth:true,sx:{mb:2},startIcon:uploading?/*#__PURE__*/_jsx(CircularProgress,{size:20,color:\"inherit\"}):null,children:uploading?'处理中...':'开始验证'})})]})})})}),uploading&&/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Fade,{in:uploading,children:/*#__PURE__*/_jsx(Card,{variant:\"outlined\",sx:{borderRadius:2,mb:2},children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",color:\"text.secondary\",gutterBottom:true,children:\"\\u5904\\u7406\\u8FDB\\u5EA6\"}),/*#__PURE__*/_jsxs(Box,{sx:{width:'100%',mt:2},children:[/*#__PURE__*/_jsx(StyledLinearProgress,{variant:\"determinate\",value:progress}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"text.secondary\",align:\"center\",sx:{mt:1},children:[Math.round(progress),\"%\"]})]})]})})})}),error&&/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Grow,{in:!!error,children:/*#__PURE__*/_jsx(Alert,{severity:\"error\",sx:{whiteSpace:'pre-wrap',borderRadius:2,boxShadow:'0 2px 8px rgba(0, 0, 0, 0.1)'},action:/*#__PURE__*/_jsx(IconButton,{\"aria-label\":\"close\",color:\"inherit\",size:\"small\",onClick:()=>setError(null),children:/*#__PURE__*/_jsx(CloseIcon,{fontSize:\"inherit\"})}),children:error})})}),resultFile&&/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Grow,{in:!!resultFile,timeout:500,children:/*#__PURE__*/_jsx(Card,{variant:\"outlined\",sx:{borderRadius:2,mb:2,bgcolor:alpha('#4caf50',0.05)},children:/*#__PURE__*/_jsx(CardContent,{children:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',justifyContent:'space-between',alignItems:'center',mb:2},children:[/*#__PURE__*/_jsxs(Typography,{variant:\"subtitle1\",color:\"success.main\",sx:{display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(CheckCircleIcon,{sx:{mr:1}}),\" \\u9A8C\\u8BC1\\u5B8C\\u6210\"]}),/*#__PURE__*/_jsx(DownloadButton,{variant:\"contained\",color:\"success\",startIcon:/*#__PURE__*/_jsx(DownloadIcon,{}),onClick:handleDownload,size:\"small\",children:\"\\u4E0B\\u8F7D\\u7ED3\\u679C\"})]})})})})}),resultData.length>0&&/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Grow,{in:resultData.length>0,timeout:700,children:/*#__PURE__*/_jsx(Card,{variant:\"outlined\",sx:{borderRadius:2,mb:2},children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsxs(Typography,{variant:\"subtitle1\",color:\"text.secondary\",gutterBottom:true,sx:{display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(VisibilityIcon,{sx:{mr:1}}),\" \\u9A8C\\u8BC1\\u7ED3\\u679C\"]}),/*#__PURE__*/_jsx(TableContainer,{sx:{mt:2,maxHeight:440},children:/*#__PURE__*/_jsxs(Table,{stickyHeader:true,size:\"small\",children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"\\u5B57\\u6BB5\\u540D\"}),/*#__PURE__*/_jsx(TableCell,{children:\"\\u5B57\\u6BB5\\u542B\\u4E49\"}),/*#__PURE__*/_jsx(TableCell,{children:\"\\u9A8C\\u8BC1\\u7ED3\\u679C\"}),/*#__PURE__*/_jsx(TableCell,{children:\"\\u8BE6\\u60C5\"})]})}),/*#__PURE__*/_jsxs(TableBody,{children:[resultData.slice(page*rowsPerPage,page*rowsPerPage+rowsPerPage).map((row,index)=>/*#__PURE__*/_jsxs(TableRow,{hover:true,children:[/*#__PURE__*/_jsx(TableCell,{children:row.字段名}),/*#__PURE__*/_jsx(TableCell,{children:row.字段含义||'-'}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(StatusChip,{label:row.判断结果,color:row.判断结果.includes('不')?'error':'success',size:\"small\",variant:\"outlined\"})}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsxs(Accordion,{disableGutters:true,elevation:0,sx:{bgcolor:'transparent','&:before':{display:'none'}},children:[/*#__PURE__*/_jsx(AccordionSummary,{expandIcon:/*#__PURE__*/_jsx(ExpandMoreIcon,{}),sx:{p:0,minHeight:'auto'},children:/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:\"\\u67E5\\u770B\\u8BE6\\u60C5\"})}),/*#__PURE__*/_jsxs(AccordionDetails,{sx:{p:1},children:[row.问题类别&&row.问题类别!=='无'&&/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"error.main\",gutterBottom:true,children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u95EE\\u9898\\u7C7B\\u522B:\"}),\" \",row.问题类别]}),row.清洗建议&&row.清洗建议!=='无'&&/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"info.main\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u6E05\\u6D17\\u5EFA\\u8BAE:\"}),\" \",row.清洗建议]}),(!row.问题类别||row.问题类别==='无')&&(!row.清洗建议||row.清洗建议==='无')&&/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",children:\"\\u6570\\u636E\\u7B26\\u5408\\u8981\\u6C42\\uFF0C\\u65E0\\u9700\\u5904\\u7406\"})]})]})})]},index)),loading&&/*#__PURE__*/_jsx(TableRow,{children:/*#__PURE__*/_jsx(TableCell,{colSpan:4,align:\"center\",children:/*#__PURE__*/_jsx(CircularProgress,{size:24})})})]})]})}),/*#__PURE__*/_jsx(TablePagination,{rowsPerPageOptions:[5,10,25,50],component:\"div\",count:resultData.length,rowsPerPage:rowsPerPage,page:page,onPageChange:handleChangePage,onRowsPerPageChange:handleChangeRowsPerPage,labelRowsPerPage:\"\\u6BCF\\u9875\\u884C\\u6570:\"})]})})})})]})]})}),/*#__PURE__*/_jsx(Snackbar,{open:snackbarOpen,autoHideDuration:4000,onClose:handleSnackbarClose,anchorOrigin:{vertical:'bottom',horizontal:'center'},children:/*#__PURE__*/_jsx(Alert,{onClose:handleSnackbarClose,severity:snackbarSeverity,sx:{width:'100%',boxShadow:'0 3px 10px rgba(0, 0, 0, 0.2)'},children:snackbarMessage})})]});};export default FileUpload;","map":{"version":3,"names":["React","useState","useEffect","Box","Button","Typography","LinearProgress","Paper","Grid","Alert","Card","CardContent","Divider","Fade","Grow","Chip","Snackbar","CircularProgress","IconButton","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","TablePagination","Accordion","AccordionSummary","AccordionDetails","Tooltip","CloudUploadIcon","DownloadIcon","CheckCircleIcon","ErrorIcon","CloseIcon","InfoIcon","ExpandMoreIcon","VisibilityIcon","styled","alpha","jsx","_jsx","jsxs","_jsxs","Input","display","StyledButton","_ref","theme","borderRadius","padding","transition","boxShadow","transform","UploadButton","_ref2","background","concat","palette","primary","main","light","color","contrastText","DownloadButton","_ref3","success","StyledPaper","_ref4","overflow","StyledLinearProgress","_ref5","height","secondary","FileChip","_ref6","margin","spacing","fontWeight","StatusChip","_ref7","FileUpload","standardFile","setStandardFile","validationFile","setValidationFile","uploading","setUploading","progress","setProgress","resultFile","setResultFile","error","setError","ws","setWs","wsConnected","setWsConnected","snackbarOpen","setSnackbarOpen","snackbarMessage","setSnackbarMessage","snackbarSeverity","setSnackbarSeverity","resultData","setResultData","page","setPage","rowsPerPage","setRowsPerPage","loading","setLoading","websocket","reconnectAttempts","maxReconnectAttempts","reconnectDelay","connectWebSocket","WebSocket","onopen","console","log","showSnackbar","onmessage","event","data","JSON","parse","type","message","prevData","existingIndex","findIndex","item","字段名","updatedData","onerror","onclose","setTimeout","err","close","severity","handleSnackbarClose","reason","handleStandardFileChange","file","target","files","name","endsWith","handleValidationFileChange","handleUpload","formData","FormData","append","response","fetch","method","body","json","ok","fetchResultData","details","filename","handleDownload","window","open","handleChangePage","newPage","handleChangeRowsPerPage","parseInt","value","sx","maxWidth","mx","mt","p","children","in","timeout","elevation","variant","gutterBottom","align","mb","WebkitBackgroundClip","WebkitTextFillColor","container","xs","md","fontSize","verticalAlign","mr","htmlFor","accept","id","onChange","disabled","component","startIcon","fullWidth","textAlign","label","icon","onDelete","onClick","size","width","Math","round","whiteSpace","action","bgcolor","justifyContent","alignItems","length","maxHeight","stickyHeader","slice","map","row","index","hover","字段含义","判断结果","includes","disableGutters","expandIcon","minHeight","问题类别","清洗建议","colSpan","rowsPerPageOptions","count","onPageChange","onRowsPerPageChange","labelRowsPerPage","autoHideDuration","onClose","anchorOrigin","vertical","horizontal"],"sources":["/Users/jiawei/Library/CloudStorage/OneDrive-Personal/Desktop/DIF/麻醉/Final/medical-data-validator/client/src/components/FileUpload.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { \n    Box, \n    Button, \n    Typography, \n    LinearProgress, \n    Paper, \n    Grid, \n    Alert, \n    Card, \n    CardContent, \n    Divider,\n    Fade,\n    Grow,\n    Chip,\n    Snackbar,\n    CircularProgress,\n    IconButton,\n    Table,\n    TableBody,\n    TableCell,\n    TableContainer,\n    TableHead,\n    TableRow,\n    TablePagination,\n    Accordion,\n    AccordionSummary,\n    AccordionDetails,\n    Tooltip\n} from '@mui/material';\nimport CloudUploadIcon from '@mui/icons-material/CloudUpload';\nimport DownloadIcon from '@mui/icons-material/Download';\nimport CheckCircleIcon from '@mui/icons-material/CheckCircle';\nimport ErrorIcon from '@mui/icons-material/Error';\nimport CloseIcon from '@mui/icons-material/Close';\nimport InfoIcon from '@mui/icons-material/Info';\nimport ExpandMoreIcon from '@mui/icons-material/ExpandMore';\nimport VisibilityIcon from '@mui/icons-material/Visibility';\nimport { styled, alpha } from '@mui/material/styles';\n\nconst Input = styled('input')({\n    display: 'none',\n});\n\nconst StyledButton = styled(Button)(({ theme }) => ({\n    borderRadius: 8,\n    padding: '10px 0',\n    transition: 'all 0.3s ease',\n    boxShadow: '0 3px 5px 2px rgba(0, 0, 0, 0.05)',\n    '&:hover': {\n        transform: 'translateY(-2px)',\n        boxShadow: '0 6px 10px 2px rgba(0, 0, 0, 0.1)',\n    }\n}));\n\nconst UploadButton = styled(StyledButton)(({ theme }) => ({\n    background: `linear-gradient(45deg, ${theme.palette.primary.main} 30%, ${theme.palette.primary.light} 90%)`,\n    color: theme.palette.primary.contrastText,\n}));\n\nconst DownloadButton = styled(StyledButton)(({ theme }) => ({\n    background: `linear-gradient(45deg, ${theme.palette.success.main} 30%, ${theme.palette.success.light} 90%)`,\n    color: theme.palette.success.contrastText,\n}));\n\nconst StyledPaper = styled(Paper)(({ theme }) => ({\n    borderRadius: 16,\n    boxShadow: '0 10px 30px rgba(0, 0, 0, 0.1)',\n    overflow: 'hidden',\n    transition: 'all 0.3s ease',\n}));\n\nconst StyledLinearProgress = styled(LinearProgress)(({ theme }) => ({\n    height: 10,\n    borderRadius: 5,\n    '& .MuiLinearProgress-bar': {\n        background: `linear-gradient(90deg, ${theme.palette.primary.main}, ${theme.palette.secondary.main})`,\n    },\n}));\n\nconst FileChip = styled(Chip)(({ theme }) => ({\n    margin: theme.spacing(1, 0),\n    borderRadius: 16,\n    fontWeight: 500,\n    boxShadow: '0 2px 5px rgba(0, 0, 0, 0.08)',\n}));\n\nconst StatusChip = styled(Chip)(({ theme }) => ({\n    borderRadius: 16,\n    fontWeight: 500,\n}));\n\nconst FileUpload = () => {\n    const [standardFile, setStandardFile] = useState(null);\n    const [validationFile, setValidationFile] = useState(null);\n    const [uploading, setUploading] = useState(false);\n    const [progress, setProgress] = useState(0);\n    const [resultFile, setResultFile] = useState(null);\n    const [error, setError] = useState(null);\n    const [ws, setWs] = useState(null);\n    const [wsConnected, setWsConnected] = useState(false);\n    const [snackbarOpen, setSnackbarOpen] = useState(false);\n    const [snackbarMessage, setSnackbarMessage] = useState('');\n    const [snackbarSeverity, setSnackbarSeverity] = useState('info');\n    const [resultData, setResultData] = useState([]);\n    const [page, setPage] = useState(0);\n    const [rowsPerPage, setRowsPerPage] = useState(10);\n    const [loading, setLoading] = useState(false);\n\n    useEffect(() => {\n        let websocket = null;\n        let reconnectAttempts = 0;\n        const maxReconnectAttempts = 5;\n        const reconnectDelay = 2000; // 2秒\n\n        const connectWebSocket = () => {\n            try {\n                websocket = new WebSocket('ws://localhost:3001');\n                \n                websocket.onopen = () => {\n                    console.log('WebSocket Connected');\n                    setWsConnected(true);\n                    setError(null);\n                    reconnectAttempts = 0;\n                    showSnackbar('服务器连接成功', 'success');\n                };\n\n                websocket.onmessage = (event) => {\n                    const data = JSON.parse(event.data);\n                    if (data.type === 'progress') {\n                        setProgress(data.progress);\n                    } else if (data.type === 'error') {\n                        setError(data.message);\n                        showSnackbar(data.message, 'error');\n                    } else if (data.type === 'result_update') {\n                        // 接收实时结果更新\n                        setResultData(prevData => {\n                            // 检查是否已存在该字段的结果\n                            const existingIndex = prevData.findIndex(item => item.字段名 === data.data.字段名);\n                            if (existingIndex >= 0) {\n                                // 更新现有结果\n                                const updatedData = [...prevData];\n                                updatedData[existingIndex] = data.data;\n                                return updatedData;\n                            } else {\n                                // 添加新结果\n                                return [...prevData, data.data];\n                            }\n                        });\n                    }\n                };\n\n                websocket.onerror = (error) => {\n                    console.error('WebSocket error:', error);\n                    setWsConnected(false);\n                };\n\n                websocket.onclose = () => {\n                    console.log('WebSocket disconnected');\n                    setWsConnected(false);\n                    \n                    // 尝试重连\n                    if (reconnectAttempts < maxReconnectAttempts) {\n                        reconnectAttempts++;\n                        console.log(`Attempting to reconnect (${reconnectAttempts}/${maxReconnectAttempts})...`);\n                        setTimeout(connectWebSocket, reconnectDelay);\n                    } else {\n                        setError('无法连接到服务器，请刷新页面重试');\n                        showSnackbar('服务器连接失败，请刷新页面重试', 'error');\n                    }\n                };\n\n                setWs(websocket);\n            } catch (err) {\n                console.error('WebSocket connection error:', err);\n                setError('WebSocket连接失败，请刷新页面重试');\n                showSnackbar('服务器连接失败，请刷新页面重试', 'error');\n            }\n        };\n\n        connectWebSocket();\n\n        return () => {\n            if (websocket) {\n                websocket.close();\n            }\n        };\n    }, []);\n\n    const showSnackbar = (message, severity) => {\n        setSnackbarMessage(message);\n        setSnackbarSeverity(severity);\n        setSnackbarOpen(true);\n    };\n\n    const handleSnackbarClose = (event, reason) => {\n        if (reason === 'clickaway') {\n            return;\n        }\n        setSnackbarOpen(false);\n    };\n\n    const handleStandardFileChange = (event) => {\n        const file = event.target.files[0];\n        if (file && file.name.endsWith('.csv')) {\n            setStandardFile(file);\n            setError(null);\n            showSnackbar(`已选择标准数据: ${file.name}`, 'success');\n        } else {\n            setError('标准数据必须是CSV文件');\n            showSnackbar('标准数据必须是CSV文件', 'error');\n        }\n    };\n\n    const handleValidationFileChange = (event) => {\n        const file = event.target.files[0];\n        if (file && (file.name.endsWith('.csv') || file.name.endsWith('.pkl'))) {\n            setValidationFile(file);\n            setError(null);\n            showSnackbar(`已选择待验证数据: ${file.name}`, 'success');\n        } else {\n            setError('待验证数据必须是CSV或PKL文件');\n            showSnackbar('待验证数据必须是CSV或PKL文件', 'error');\n        }\n    };\n\n    const handleUpload = async () => {\n        if (!standardFile || !validationFile) {\n            setError('请选择标准数据和待验证数据文件');\n            showSnackbar('请选择标准数据和待验证数据文件', 'warning');\n            return;\n        }\n\n        if (!wsConnected) {\n            setError('服务器连接已断开，请刷新页面重试');\n            showSnackbar('服务器连接已断开，请刷新页面重试', 'error');\n            return;\n        }\n\n        setUploading(true);\n        setProgress(0);\n        setError(null);\n        setResultData([]);  // 清空之前的结果\n        showSnackbar('开始上传数据...', 'info');\n\n        const formData = new FormData();\n        formData.append('standard', standardFile);\n        formData.append('validation', validationFile);\n\n        try {\n            const response = await fetch('http://localhost:3001/api/upload', {\n                method: 'POST',\n                body: formData,\n            });\n\n            const data = await response.json();\n\n            if (response.ok) {\n                setResultFile(data.resultFile);\n                showSnackbar('数据验证完成，可以下载结果', 'success');\n                \n                // 加载结果数据\n                fetchResultData(data.resultFile);\n            } else {\n                setError(data.error + (data.details ? `\\n${data.details}` : ''));\n                showSnackbar('上传失败: ' + data.error, 'error');\n            }\n        } catch (err) {\n            setError('上传过程中发生错误: ' + err.message);\n            showSnackbar('上传错误: ' + err.message, 'error');\n            console.error('Upload error:', err);\n        } finally {\n            setUploading(false);\n        }\n    };\n\n    const fetchResultData = async (filename) => {\n        try {\n            setLoading(true);\n            const response = await fetch(`http://localhost:3001/api/result/${filename}`);\n            \n            if (response.ok) {\n                const data = await response.json();\n                setResultData(data);\n            } else {\n                showSnackbar('获取结果数据失败', 'error');\n            }\n        } catch (error) {\n            console.error('Error fetching result data:', error);\n            showSnackbar('获取结果数据失败: ' + error.message, 'error');\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const handleDownload = () => {\n        if (resultFile) {\n            window.open(`http://localhost:3001/api/download/${resultFile}`, '_blank');\n            showSnackbar('开始下载结果文件', 'info');\n        }\n    };\n\n    const handleChangePage = (event, newPage) => {\n        setPage(newPage);\n    };\n\n    const handleChangeRowsPerPage = (event) => {\n        setRowsPerPage(parseInt(event.target.value, 10));\n        setPage(0);\n    };\n\n    return (\n        <Box sx={{ maxWidth: 1200, mx: 'auto', mt: 4, p: 3 }}>\n            <Fade in={true} timeout={800}>\n                <StyledPaper elevation={3} sx={{ p: 4 }}>\n                    <Typography \n                        variant=\"h4\" \n                        gutterBottom \n                        align=\"center\"\n                        sx={{ \n                            mb: 4, \n                            fontWeight: 500,\n                            background: 'linear-gradient(45deg, #2196F3 30%, #21CBF3 90%)',\n                            WebkitBackgroundClip: 'text',\n                            WebkitTextFillColor: 'transparent'\n                        }}\n                    >\n                        医疗数据验证系统\n                    </Typography>\n\n                    <Divider sx={{ mb: 4 }} />\n\n                    <Grid container spacing={3}>\n                        <Grid item xs={12} md={6}>\n                            <Grow in={true} timeout={1000}>\n                                <Card variant=\"outlined\" sx={{ borderRadius: 2, mb: 2 }}>\n                                    <CardContent>\n                                        <Typography variant=\"subtitle1\" color=\"text.secondary\" gutterBottom>\n                                            <InfoIcon fontSize=\"small\" sx={{ verticalAlign: 'middle', mr: 1 }} />\n                                            第一步: 选择标准数据\n                                        </Typography>\n                                        \n                                        <Box sx={{ mt: 2 }}>\n                                            <label htmlFor=\"standard-file\">\n                                                <Input\n                                                    accept=\".csv\"\n                                                    id=\"standard-file\"\n                                                    type=\"file\"\n                                                    onChange={handleStandardFileChange}\n                                                    disabled={uploading}\n                                                />\n                                                <UploadButton\n                                                    variant=\"contained\"\n                                                    component=\"span\"\n                                                    startIcon={<CloudUploadIcon />}\n                                                    fullWidth\n                                                    disabled={uploading}\n                                                >\n                                                    选择标准数据文件 (CSV)\n                                                </UploadButton>\n                                            </label>\n                                            {standardFile && (\n                                                <Fade in={true}>\n                                                    <Box sx={{ mt: 1, textAlign: 'center' }}>\n                                                        <FileChip \n                                                            label={standardFile.name}\n                                                            color=\"primary\"\n                                                            variant=\"outlined\"\n                                                            icon={<CheckCircleIcon />}\n                                                            onDelete={() => setStandardFile(null)}\n                                                        />\n                                                    </Box>\n                                                </Fade>\n                                            )}\n                                        </Box>\n                                    </CardContent>\n                                </Card>\n                            </Grow>\n                        </Grid>\n\n                        <Grid item xs={12} md={6}>\n                            <Grow in={true} timeout={1200}>\n                                <Card variant=\"outlined\" sx={{ borderRadius: 2, mb: 2 }}>\n                                    <CardContent>\n                                        <Typography variant=\"subtitle1\" color=\"text.secondary\" gutterBottom>\n                                            <InfoIcon fontSize=\"small\" sx={{ verticalAlign: 'middle', mr: 1 }} />\n                                            第二步: 选择待验证数据\n                                        </Typography>\n                                        \n                                        <Box sx={{ mt: 2 }}>\n                                            <label htmlFor=\"validation-file\">\n                                                <Input\n                                                    accept=\".csv,.pkl\"\n                                                    id=\"validation-file\"\n                                                    type=\"file\"\n                                                    onChange={handleValidationFileChange}\n                                                    disabled={uploading}\n                                                />\n                                                <UploadButton\n                                                    variant=\"contained\"\n                                                    component=\"span\"\n                                                    startIcon={<CloudUploadIcon />}\n                                                    fullWidth\n                                                    disabled={uploading}\n                                                >\n                                                    选择待验证数据文件 (CSV/PKL)\n                                                </UploadButton>\n                                            </label>\n                                            {validationFile && (\n                                                <Fade in={true}>\n                                                    <Box sx={{ mt: 1, textAlign: 'center' }}>\n                                                        <FileChip \n                                                            label={validationFile.name}\n                                                            color=\"primary\"\n                                                            variant=\"outlined\"\n                                                            icon={<CheckCircleIcon />}\n                                                            onDelete={() => setValidationFile(null)}\n                                                        />\n                                                    </Box>\n                                                </Fade>\n                                            )}\n                                        </Box>\n                                    </CardContent>\n                                </Card>\n                            </Grow>\n                        </Grid>\n\n                        <Grid item xs={12}>\n                            <Grow in={true} timeout={1400}>\n                                <Card variant=\"outlined\" sx={{ borderRadius: 2, mb: 2 }}>\n                                    <CardContent>\n                                        <Typography variant=\"subtitle1\" color=\"text.secondary\" gutterBottom>\n                                            <InfoIcon fontSize=\"small\" sx={{ verticalAlign: 'middle', mr: 1 }} />\n                                            第三步: 开始验证\n                                        </Typography>\n                                        \n                                        <Box sx={{ mt: 2 }}>\n                                            <StyledButton\n                                                variant=\"contained\"\n                                                color=\"primary\"\n                                                onClick={handleUpload}\n                                                disabled={!standardFile || !validationFile || uploading || !wsConnected}\n                                                fullWidth\n                                                sx={{ mb: 2 }}\n                                                startIcon={uploading ? <CircularProgress size={20} color=\"inherit\" /> : null}\n                                            >\n                                                {uploading ? '处理中...' : '开始验证'}\n                                            </StyledButton>\n                                        </Box>\n                                    </CardContent>\n                                </Card>\n                            </Grow>\n                        </Grid>\n\n                        {uploading && (\n                            <Grid item xs={12}>\n                                <Fade in={uploading}>\n                                    <Card variant=\"outlined\" sx={{ borderRadius: 2, mb: 2 }}>\n                                        <CardContent>\n                                            <Typography variant=\"subtitle1\" color=\"text.secondary\" gutterBottom>\n                                                处理进度\n                                            </Typography>\n                                            <Box sx={{ width: '100%', mt: 2 }}>\n                                                <StyledLinearProgress variant=\"determinate\" value={progress} />\n                                                <Typography variant=\"body2\" color=\"text.secondary\" align=\"center\" sx={{ mt: 1 }}>\n                                                    {Math.round(progress)}%\n                                                </Typography>\n                                            </Box>\n                                        </CardContent>\n                                    </Card>\n                                </Fade>\n                            </Grid>\n                        )}\n\n                        {error && (\n                            <Grid item xs={12}>\n                                <Grow in={!!error}>\n                                    <Alert \n                                        severity=\"error\" \n                                        sx={{ \n                                            whiteSpace: 'pre-wrap',\n                                            borderRadius: 2,\n                                            boxShadow: '0 2px 8px rgba(0, 0, 0, 0.1)'\n                                        }}\n                                        action={\n                                            <IconButton\n                                                aria-label=\"close\"\n                                                color=\"inherit\"\n                                                size=\"small\"\n                                                onClick={() => setError(null)}\n                                            >\n                                                <CloseIcon fontSize=\"inherit\" />\n                                            </IconButton>\n                                        }\n                                    >\n                                        {error}\n                                    </Alert>\n                                </Grow>\n                            </Grid>\n                        )}\n\n                        {resultFile && (\n                            <Grid item xs={12}>\n                                <Grow in={!!resultFile} timeout={500}>\n                                    <Card variant=\"outlined\" sx={{ borderRadius: 2, mb: 2, bgcolor: alpha('#4caf50', 0.05) }}>\n                                        <CardContent>\n                                            <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 2 }}>\n                                                <Typography variant=\"subtitle1\" color=\"success.main\" sx={{ display: 'flex', alignItems: 'center' }}>\n                                                    <CheckCircleIcon sx={{ mr: 1 }} /> 验证完成\n                                                </Typography>\n                                                <DownloadButton\n                                                    variant=\"contained\"\n                                                    color=\"success\"\n                                                    startIcon={<DownloadIcon />}\n                                                    onClick={handleDownload}\n                                                    size=\"small\"\n                                                >\n                                                    下载结果\n                                                </DownloadButton>\n                                            </Box>\n                                        </CardContent>\n                                    </Card>\n                                </Grow>\n                            </Grid>\n                        )}\n\n                        {resultData.length > 0 && (\n                            <Grid item xs={12}>\n                                <Grow in={resultData.length > 0} timeout={700}>\n                                    <Card variant=\"outlined\" sx={{ borderRadius: 2, mb: 2 }}>\n                                        <CardContent>\n                                            <Typography variant=\"subtitle1\" color=\"text.secondary\" gutterBottom sx={{ display: 'flex', alignItems: 'center' }}>\n                                                <VisibilityIcon sx={{ mr: 1 }} /> 验证结果\n                                            </Typography>\n                                            \n                                            <TableContainer sx={{ mt: 2, maxHeight: 440 }}>\n                                                <Table stickyHeader size=\"small\">\n                                                    <TableHead>\n                                                        <TableRow>\n                                                            <TableCell>字段名</TableCell>\n                                                            <TableCell>字段含义</TableCell>\n                                                            <TableCell>验证结果</TableCell>\n                                                            <TableCell>详情</TableCell>\n                                                        </TableRow>\n                                                    </TableHead>\n                                                    <TableBody>\n                                                        {resultData\n                                                            .slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\n                                                            .map((row, index) => (\n                                                                <TableRow key={index} hover>\n                                                                    <TableCell>{row.字段名}</TableCell>\n                                                                    <TableCell>{row.字段含义 || '-'}</TableCell>\n                                                                    <TableCell>\n                                                                        <StatusChip \n                                                                            label={row.判断结果}\n                                                                            color={row.判断结果.includes('不') ? 'error' : 'success'}\n                                                                            size=\"small\"\n                                                                            variant=\"outlined\"\n                                                                        />\n                                                                    </TableCell>\n                                                                    <TableCell>\n                                                                        <Accordion \n                                                                            disableGutters \n                                                                            elevation={0}\n                                                                            sx={{ \n                                                                                bgcolor: 'transparent',\n                                                                                '&:before': { display: 'none' }\n                                                                            }}\n                                                                        >\n                                                                            <AccordionSummary\n                                                                                expandIcon={<ExpandMoreIcon />}\n                                                                                sx={{ p: 0, minHeight: 'auto' }}\n                                                                            >\n                                                                                <Typography variant=\"body2\">查看详情</Typography>\n                                                                            </AccordionSummary>\n                                                                            <AccordionDetails sx={{ p: 1 }}>\n                                                                                {row.问题类别 && row.问题类别 !== '无' && (\n                                                                                    <Typography variant=\"body2\" color=\"error.main\" gutterBottom>\n                                                                                        <strong>问题类别:</strong> {row.问题类别}\n                                                                                    </Typography>\n                                                                                )}\n                                                                                {row.清洗建议 && row.清洗建议 !== '无' && (\n                                                                                    <Typography variant=\"body2\" color=\"info.main\">\n                                                                                        <strong>清洗建议:</strong> {row.清洗建议}\n                                                                                    </Typography>\n                                                                                )}\n                                                                                {(!row.问题类别 || row.问题类别 === '无') && (!row.清洗建议 || row.清洗建议 === '无') && (\n                                                                                    <Typography variant=\"body2\" color=\"text.secondary\">\n                                                                                        数据符合要求，无需处理\n                                                                                    </Typography>\n                                                                                )}\n                                                                            </AccordionDetails>\n                                                                        </Accordion>\n                                                                    </TableCell>\n                                                                </TableRow>\n                                                            ))}\n                                                        {loading && (\n                                                            <TableRow>\n                                                                <TableCell colSpan={4} align=\"center\">\n                                                                    <CircularProgress size={24} />\n                                                                </TableCell>\n                                                            </TableRow>\n                                                        )}\n                                                    </TableBody>\n                                                </Table>\n                                            </TableContainer>\n                                            <TablePagination\n                                                rowsPerPageOptions={[5, 10, 25, 50]}\n                                                component=\"div\"\n                                                count={resultData.length}\n                                                rowsPerPage={rowsPerPage}\n                                                page={page}\n                                                onPageChange={handleChangePage}\n                                                onRowsPerPageChange={handleChangeRowsPerPage}\n                                                labelRowsPerPage=\"每页行数:\"\n                                            />\n                                        </CardContent>\n                                    </Card>\n                                </Grow>\n                            </Grid>\n                        )}\n                    </Grid>\n                </StyledPaper>\n            </Fade>\n            \n            <Snackbar\n                open={snackbarOpen}\n                autoHideDuration={4000}\n                onClose={handleSnackbarClose}\n                anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\n            >\n                <Alert \n                    onClose={handleSnackbarClose} \n                    severity={snackbarSeverity} \n                    sx={{ width: '100%', boxShadow: '0 3px 10px rgba(0, 0, 0, 0.2)' }}\n                >\n                    {snackbarMessage}\n                </Alert>\n            </Snackbar>\n        </Box>\n    );\n};\n\nexport default FileUpload; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}